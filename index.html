<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6C63FF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Traduci">
    <meta name="description" content="App di traduzione Italiano-Arabo per bambini">

    <title>ğŸŒˆ Traduci e Impara!</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon.svg">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header class="header">
            <h1>ğŸŒˆ Traduci e Impara! ğŸŒˆ</h1>
            <p class="subtitle">Italiano â†” Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p>
        </header>

        <div class="columns">
            <!-- Colonna Italiana -->
            <div class="column italian">
                <div class="column-header">
                    <span class="flag">ğŸ‡®ğŸ‡¹</span>
                    <label for="inputIT">Italiano</label>
                </div>
                <textarea id="inputIT" placeholder="Scrivi qui una parola..."></textarea>
                <div id="outputIT" class="translation-box"></div>
                <button id="speakIT" class="speak-btn">ğŸ”Š Ascolta</button>
            </div>

            <!-- Colonna Araba -->
            <div class="column arabic">
                <div class="column-header">
                    <span class="flag">ğŸ‡¸ğŸ‡¦</span>
                    <label for="inputAR">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</label>
                </div>
                <textarea id="inputAR" placeholder="...Ø§ÙƒØªØ¨ Ù‡Ù†Ø§" dir="rtl"></textarea>
                <div id="outputAR" class="translation-box" dir="rtl"></div>
                <button id="speakAR" class="speak-btn">ğŸ”Š Ø§Ø³ØªÙ…Ø¹</button>
                <button id="toggleKeyboardBtn" class="keyboard-btn">âŒ¨ï¸ Tastiera Araba</button>
                <div id="virtualKeyboard" class="keyboard"></div>
            </div>
        </div>

        <!-- Sezione Parole per Categoria -->
        <section class="word-categories">
            <h2>ğŸ“š Parole da Imparare</h2>
            <p class="hint">Clicca su una parola per tradurla!</p>

            <div class="category-tabs">
                <button class="tab active" data-category="saluti">ğŸ‘‹ Saluti</button>
                <button class="tab" data-category="famiglia">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Famiglia</button>
                <button class="tab" data-category="scuola">ğŸ« Scuola</button>
                <button class="tab" data-category="casa">ğŸ  Casa</button>
                <button class="tab" data-category="cibo">ğŸ Cibo</button>
                <button class="tab" data-category="colori">ğŸ¨ Colori</button>
                <button class="tab" data-category="numeri">ğŸ”¢ Numeri</button>
                <button class="tab" data-category="giorni">ğŸ“… Giorni</button>
                <button class="tab" data-category="animali">ğŸ¾ Animali</button>
                <button class="tab" data-category="corpo">ğŸ¦´ Corpo</button>
                <button class="tab" data-category="vestiti">ğŸ‘• Vestiti</button>
                <button class="tab" data-category="emozioni">ğŸ˜Š Emozioni</button>
                <button class="tab" data-category="verbi">ğŸƒ Verbi</button>
                <button class="tab" data-category="natura">ğŸŒ³ Natura</button>
                <button class="tab" data-category="frasi">ğŸ’¬ Frasi</button>
            </div>

            <div id="wordGrid" class="word-grid"></div>
        </section>

        <!-- Mode Tabs: Impara / Gioca -->
        <div class="mode-tabs">
            <button class="mode-tab active" data-mode="learn">ğŸ“š Impara</button>
            <button class="mode-tab" data-mode="quiz">ğŸ® Gioca!</button>
        </div>

        <!-- Quiz Section (hidden by default) -->
        <section id="quizSection" class="quiz-section" style="display: none;">
            <div class="quiz-header">
                <div class="score-display">
                    <span class="stars">â­ <span id="starCount">0</span></span>
                    <span class="streak">ğŸ”¥ <span id="streakCount">0</span></span>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <p id="progressText">Domanda 1 di 10</p>
            </div>

            <div class="quiz-card">
                <p class="quiz-instruction">Come si dice in Arabo?</p>
                <h2 id="quizWord" class="quiz-word">ciao</h2>
                <div id="quizOptions" class="quiz-options">
                    <!-- Options will be generated by JS -->
                </div>
            </div>

            <div id="quizFeedback" class="quiz-feedback"></div>

            <div class="quiz-controls">
                <button id="nextQuestionBtn" class="next-btn" style="display: none;">Prossima â¡ï¸</button>
                <button id="restartQuizBtn" class="restart-btn" style="display: none;">ğŸ”„ Ricomincia</button>
            </div>

            <!-- Results screen -->
            <div id="quizResults" class="quiz-results" style="display: none;">
                <h2>ğŸ‰ Complimenti!</h2>
                <div class="final-score">
                    <span id="finalStars">â­â­â­</span>
                    <p id="finalMessage">Hai fatto un ottimo lavoro!</p>
                </div>
                <button id="playAgainBtn" class="play-again-btn">ğŸ® Gioca Ancora</button>
            </div>
        </section>

        <!-- Install prompt (for PWA) -->
        <div id="installPrompt" class="install-prompt" style="display: none;">
            <p>ğŸ“² Installa l'app sul tuo telefono!</p>
            <button id="installBtn">Installa</button>
            <button id="dismissBtn">Non ora</button>
        </div>
    </div>

    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registrato!'))
                .catch(err => console.log('Errore SW:', err));
        }
    </script>
</body>

</html>